# Cofacts 資料集清洗報告

## 摘要

本研究針對 Cofacts 真的假的資料集進行系統化資料清理，從原始 109,174 筆資料經過六階段處理，最終保留 42,632 筆高品質資料（保留率 39.05%）。清理流程包含：日期過濾、垃圾訊息移除、重複值處理、純連結過濾、類別篩選、文字長度過濾及缺失值處理。最終資料集包含 35,244 筆謠言與 7,388 筆非謠言，無缺失值與重複值，適合進行後續模型訓練。

---

## 📊 圖 3-1 資料清理各階段數量變化

```
階段 0    ████████████████████████████████████████████████  109,174 (100.0%)
          │
          │ ↓ -23.9% (關鍵字過濾 + 去重)
          │
階段 1    ████████████████████████████████████  83,116 (76.1%)
          │
          │ ↓ -7.2% (純連結過濾)
          │
階段 2    ██████████████████████████████████  75,237 (68.9%)
          │
          │ ↓ -28.5% (類別篩選)
          │
階段 3    ████████████████████  44,094 (40.4%)
          │
          │ ↓ -0.9% (文字長度過濾)
          │
階段 4    ███████████████████  43,067 (39.5%)
          │
          │ ↓ -0.4% (缺失值處理)
          │
階段 5    ███████████████████  42,632 (39.0%)
          │
          └──────────────────────────────────────────────────→
          0        20K       40K       60K       80K      100K
```

**總刪除率**: 60.95%  
**最終保留**: 42,632 筆

---

## 📋 圖 3-2 刪除原因分布

```
總刪除：66,542 筆 (100%)

類別篩選    ████████████████████████████████  46.8% (31,143 筆)
垃圾訊息    ████████████████████████  36.1% (24,011 筆)
純連結      ██████  11.8% (7,879 筆)
重複資料    █  3.1% (2,047 筆)
長度不足    █  1.5% (1,027 筆)
缺失值      █  0.7% (435 筆)
```

---

## 📈 圖 3-3 類別分布變化（階段 3 前後對比）

### 階段 3 前（75,237 筆）

```
replies_type 分布:

RUMOR          ████████████████████  48.3% (36,344 筆)
NOT_ARTICLE    ████████████████  31.4% (23,623 筆)
NOT_RUMOR      █████  10.3% (7,750 筆)
OPINIONATED    █████  9.9% (7,520 筆)
```

### 階段 3 後（44,094 筆）─────篩選後───→

```
replies_type 分布:

RUMOR          ████████████████████████████████████  82.4% (36,344 筆)
NOT_RUMOR      █████████  17.6% (7,750 筆)

（僅保留二元分類）
```

**說明**: 為符合二元分類需求，僅保留 RUMOR（謠言）與 NOT_RUMOR（非謠言）兩類，刪除 NOT_ARTICLE（非文章）與 OPINIONATED（意見）共 31,143 筆資料。

---

## 🔍 詳細清洗步驟說明

### 階段 0：日期過濾與資料整合

**時間範圍**: 2020-01-01 至 2025-06-08  
**原始資料**: 109,174 筆  
**特徵數量**: 21 個

**說明**: 整合多個來源資料，並進行日期範圍過濾，確保資料時效性與一致性。

---

### 階段 1：關鍵字過濾與去重

**執行時間**: 2025-11-07 20:41:49  
**輸入資料**: 109,174 筆  
**輸出資料**: 83,116 筆  
**刪除數量**: 26,058 筆 (23.87%)

#### 1.1 關鍵字過濾

**過濾欄位**: `replies_text`  
**過濾關鍵字**: 外送茶、叫小姐、定點茶、被騙如何自救賴  
**刪除數量**: 24,011 筆 (21.99%)

**各關鍵字命中數**:
- `外送茶`: 21,231 筆
- `叫小姐`: 23,654 筆
- `定點茶`: 13,203 筆
- `被騙如何自救賴`: 218 筆

**說明**: 過濾垃圾訊息、色情廣告等與事實查核無關的內容，提升資料集品質。

#### 1.2 重複值移除

**判斷欄位**: `articles_id`, `replies_text`  
**刪除數量**: 2,047 筆 (2.40%)

**說明**: 針對相同文章 ID 與相同回覆內容的重複資料進行去重，保留第一筆資料。

#### 階段 1 統計

| 項目 | 清理前 | 清理後 | 變化量 | 變化率 |
|------|--------|--------|--------|--------|
| 資料筆數 | 109,174 | 83,116 | -26,058 | -23.87% |
| 特徵數量 | 21 | 21 | 0 | 0.00% |
| 缺失值總數 | 274,436 | 165,678 | -108,758 | -39.63% |

---

### 階段 2：純連結資料過濾

**執行時間**: 2025-11-08 10:41:31  
**輸入資料**: 83,116 筆  
**輸出資料**: 75,237 筆  
**刪除數量**: 7,879 筆 (9.48%)

#### 2.1 純連結過濾

**過濾欄位**: `articles_text`, `replies_text`  
**刪除數量**: 7,879 筆 (9.48%)

**各欄位命中數**:
- `articles_text`: 7,613 筆（僅包含連結的文章）
- `replies_text`: 307 筆（僅包含連結的回覆）

**說明**: 移除內容僅為網址連結的資料，此類資料缺乏文字內容，不適合進行文字分析與模型訓練。

#### 階段 2 統計

| 項目 | 清理前 | 清理後 | 變化量 | 變化率 |
|------|--------|--------|--------|--------|
| 資料筆數 | 83,116 | 75,237 | -7,879 | -9.48% |
| 特徵數量 | 21 | 21 | 0 | 0.00% |
| 缺失值總數 | 165,678 | 159,070 | -6,608 | -3.99% |

---

### 階段 3：類別篩選（保留二元分類）

**執行時間**: 2025-11-08 23:59:42  
**輸入資料**: 75,237 筆  
**輸出資料**: 44,094 筆  
**刪除數量**: 31,143 筆 (41.39%)

#### 3.1 replies_type 類別篩選

**篩選欄位**: `replies_type`  
**保留類別**: RUMOR（謠言）、NOT_RUMOR（非謠言）  
**刪除類別**: NOT_ARTICLE（非文章）、OPINIONATED（意見）

**階段 3 前 replies_type 分布**:
```
replies_type        數量      百分比
─────────────────────────────────
RUMOR              36,344    48.3%
NOT_ARTICLE        23,623    31.4%
NOT_RUMOR           7,750    10.3%
OPINIONATED         7,520     9.9%
─────────────────────────────────
總計               75,237   100.0%
```

**階段 3 後 replies_type 分布**:
```
replies_type        數量      百分比
─────────────────────────────────
RUMOR              36,344    82.4%
NOT_RUMOR           7,750    17.6%
─────────────────────────────────
總計               44,094   100.0%
```

**說明**: 為建立二元分類模型（謠言 vs. 非謠言），僅保留 RUMOR 與 NOT_RUMOR 兩類，移除 NOT_ARTICLE（非文章類內容）與 OPINIONATED（意見類內容）。此步驟確保資料集符合研究目標，提升模型訓練效果。

#### 階段 3 統計

| 項目 | 清理前 | 清理後 | 變化量 | 變化率 |
|------|--------|--------|--------|--------|
| 資料筆數 | 75,237 | 44,094 | -31,143 | -41.39% |
| 特徵數量 | 21 | 21 | 0 | 0.00% |
| 缺失值總數 | 159,070 | 61,121 | -97,949 | -61.58% |
| 整體缺失率 | 10.07% | 6.60% | -3.47% | - |

---

### 階段 4：文字長度過濾

**執行時間**: 2025-11-10 22:19:23  
**輸入資料**: 44,094 筆  
**輸出資料**: 43,067 筆  
**刪除數量**: 1,027 筆 (2.33%)

#### 4.1 replies_text 長度過濾

**過濾欄位**: `replies_text`  
**最小長度**: 20 字  
**最大長度**: 不限  
**刪除數量**: 1,027 筆 (2.33%)

**刪除原因分布**:
- 過短（< 20 字）: 1,027 筆

**說明**: 移除回覆文字長度小於 20 字的資料，此類資料內容過於簡短，資訊量不足，可能影響模型學習效果。設定 20 字為最小長度閾值，確保保留的資料具有足夠的文字資訊。

#### 階段 4 統計

| 項目 | 清理前 | 清理後 | 變化量 | 變化率 |
|------|--------|--------|--------|--------|
| 資料筆數 | 44,094 | 43,067 | -1,027 | -2.33% |
| 特徵數量 | 21 | 21 | 0 | 0.00% |
| 缺失值總數 | 61,121 | 59,736 | -1,385 | -2.27% |
| 整體缺失率 | 6.60% | 6.60% | 0.00% | - |

---

### 階段 5：缺失值處理

**執行時間**: 2025-11-16 14:45:26  
**輸入資料**: 43,067 筆  
**輸出資料**: 42,632 筆  
**刪除數量**: 435 筆 (1.01%)

#### 5.1 缺失值分析

**參數設定**:
- 特徵缺失閾值: 100.0%
- 資料列缺失閾值: 100.0%

#### 5.2 數值型特徵處理（刪除策略）

針對核心文字欄位，若存在缺失值則刪除該筆資料：

| 欄位 | 缺失數量 | 缺失率 | 處理方式 |
|------|----------|--------|----------|
| `articles_text` | 433 | 1.01% | 刪除資料列 |
| `replies_text` | 2 | 0.00% | 刪除資料列 |

**總刪除**: 435 筆

**說明**: 文章內容（articles_text）與回覆內容（replies_text）為核心特徵，若缺失則無法進行有效分析，因此採用刪除策略。

#### 5.3 類別型特徵處理（填補策略）

針對非核心欄位，缺失值以 'UNKNOWN' 標記：

| 欄位 | 缺失數量 | 缺失率 | 處理方式 |
|------|----------|--------|----------|
| `categories_title` | 11,628 | 27.27% | 填補為 UNKNOWN |
| `categories_id` | 11,628 | 27.27% | 填補為 UNKNOWN |
| `article_hyperlinks_url` | 33,266 | 78.03% | 填補為 UNKNOWN |
| `reply_hyperlinks_url` | 1,050 | 2.46% | 填補為 UNKNOWN |
| `articles_updatedAt` | 742 | 1.74% | 填補為 UNKNOWN |
| `replies_reference` | 7 | 0.02% | 填補為 UNKNOWN |
| `replies_createdAt` | 1 | 0.00% | 填補為 UNKNOWN |
| `replies_userIdsha256` | 2 | 0.00% | 填補為 UNKNOWN |

**總填補**: 58,324 個缺失值

**說明**: 對於非核心特徵，採用 'UNKNOWN' 標記缺失值，保留資料筆數的同時明確標示缺失狀態，避免填補方法引入偏差。

#### 階段 5 統計

| 項目 | 清理前 | 清理後 | 變化量 | 變化率 |
|------|--------|--------|--------|--------|
| 資料筆數 | 43,067 | 42,632 | -435 | -1.01% |
| 特徵數量 | 21 | 21 | 0 | 0.00% |
| 缺失值總數 | 59,736 | 0 | -59,736 | -100.00% |
| 整體缺失率 | 6.60% | 0.00% | -6.60% | - |

---

## 📊 整體清洗統計總表

### 表 3-1 各階段資料數量變化

| 階段 | 說明 | 資料筆數 | 刪除數量 | 刪除率 | 累計保留率 |
|------|------|----------|----------|--------|------------|
| 階段 0 | 日期過濾與整合 | 109,174 | - | - | 100.0% |
| 階段 1 | 關鍵字過濾 + 去重 | 83,116 | 26,058 | 23.87% | 76.1% |
| 階段 2 | 純連結過濾 | 75,237 | 7,879 | 9.48% | 68.9% |
| 階段 3 | 類別篩選 | 44,094 | 31,143 | 41.39% | 40.4% |
| 階段 4 | 文字長度過濾 | 43,067 | 1,027 | 2.33% | 39.5% |
| 階段 5 | 缺失值處理 | 42,632 | 435 | 1.01% | 39.0% |

**總計**: 從 109,174 筆減少至 42,632 筆，總刪除 66,542 筆（60.95%）

### 表 3-2 清理前後對比

| 項目 | 清理前（階段 0） | 清理後（階段 5） | 變化量 | 變化率 |
|------|------------------|------------------|--------|--------|
| 資料筆數 | 109,174 | 42,632 | -66,542 | -60.95% |
| 特徵數量 | 21 | 21 | 0 | 0.00% |
| 缺失值總數 | 274,436 | 0 | -274,436 | -100.00% |
| 整體缺失率 | 11.96% | 0.00% | -11.96% | - |
| 重複值數量 | 2,047 | 0 | -2,047 | -100.00% |

---

## 🎯 最終資料集特徵

### replies_type 最終分布

```
replies_type        數量      百分比
─────────────────────────────────
RUMOR              35,244    82.7%
NOT_RUMOR           7,388    17.3%
─────────────────────────────────
總計               42,632   100.0%
```

**類別比例**: 謠言（RUMOR）與非謠言（NOT_RUMOR）比例約為 4.8:1，存在類別不平衡現象。

### 資料集品質指標

- ✅ **資料完整性**: 100%（無缺失值）
- ✅ **資料唯一性**: 100%（無重複值）
- ✅ **文字長度**: replies_text 均 ≥ 20 字
- ✅ **類別一致性**: 僅包含 RUMOR 與 NOT_RUMOR 兩類
- ✅ **時間範圍**: 2020-01-01 至 2025-06-08

---

## 📖 論文撰寫建議

### 3.1 資料預處理

本研究採用六階段資料清理流程，確保資料品質並符合研究目標。所有清理步驟均記錄於日誌檔案中，確保研究可重現性。

#### 3.1.1 日期過濾（階段 0）

保留 2020-01-01 至 2025-06-08 期間資料，共 109,174 筆，涵蓋近五年事實查核資料。

#### 3.1.2 垃圾訊息過濾與去重（階段 1）

針對 `replies_text` 欄位過濾包含「外送茶」、「叫小姐」、「定點茶」、「被騙如何自救賴」等關鍵字的垃圾訊息，刪除 24,011 筆（21.99%）。接著針對 `articles_id` 與 `replies_text` 進行去重，刪除 2,047 筆重複資料（2.40%）。此階段共刪除 26,058 筆，保留 83,116 筆。

#### 3.1.3 純連結過濾（階段 2）

移除 `articles_text` 或 `replies_text` 內容僅為網址連結的資料 7,879 筆（9.48%），保留 75,237 筆。

#### 3.1.4 類別篩選（階段 3）

為建立二元分類模型，僅保留 `replies_type` 為 RUMOR（謠言）與 NOT_RUMOR（非謠言）兩類，移除 NOT_ARTICLE 與 OPINIONATED 共 31,143 筆（41.39%），保留 44,094 筆。

#### 3.1.5 文字長度過濾（階段 4）

移除 `replies_text` 長度小於 20 字的資料 1,027 筆（2.33%），確保文字資訊充足，保留 43,067 筆。

#### 3.1.6 缺失值處理（階段 5）

核心欄位（`articles_text`、`replies_text`）若有缺失值則刪除該筆資料，共刪除 435 筆（1.01%）。非核心欄位（`categories_title`、`categories_id`、`article_hyperlinks_url`、`reply_hyperlinks_url` 等）缺失值以 'UNKNOWN' 標記，共填補 58,324 個缺失值。最終保留 42,632 筆完整資料。

### 3.2 資料清理結果

經六階段清理後，資料集從 109,174 筆減少至 42,632 筆（保留率 39.05%），保留 21 個特徵。缺失值從 274,436 個降至 0（缺失率從 11.96% 降至 0%），重複值從 2,047 筆降至 0。最終資料集包含 35,244 筆謠言（82.7%）與 7,388 筆非謠言（17.3%），類別比例約 4.8:1，反映真實世界分布。

---

**報告生成時間**: 2025-11-17  
**資料清洗期間**: 2025-11-07 至 2025-11-16  
**最終資料集**: cofacts_integrated_20251103_22_cleaned_20251116_151618_缺失值.xlsx
